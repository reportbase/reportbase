<!DOCTYPE html>
<html>
<head>
  <title>Chrome Identity Example</title>
</head>
<body>
  <h1>Chrome Identity Example</h1>
  <button id="sign-in-button">Sign in with Chrome</button>
  <div id="email-address"></div>

  <script>
    // Sign in with Chrome.
    async function signIn() {
      try {
        // Get an access token from Chrome.
        const authResult = await chrome.identity.getAuthToken({ interactive: true });

        // Get the user's email address from the Google People API.
        const response = await gapi.client.people.people.get({
          resourceName: 'people/me',
          personFields: 'emailAddresses'
        });

        // Display the user's email address on the page.
        document.getElementById('email-address').innerHTML = response.emailAddresses[0].value;
      } catch (error) {
        // Handle the error.
        console.log(error);
      }
    }

    // Handle the sign-in button click.
    document.getElementById('sign-in-button').addEventListener('click', signIn);
  </script>
</body>
</html>
